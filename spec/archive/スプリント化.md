0. 現状（仕様書と実装の位置づけ）

仕様書を見る限り、v1.1〜v3.4で「学習の品質（正確性・速度・弱点）」「復習導線」「日別成長」「距離ゲーム化」まで到達しています。 

技術仕様書V3.4


ここから先は “計算のUX”と“走る世界のUX”を分離してゲーム感を上げるフェーズです。

1. 実装計画（次のロードマップ）
Phase A：ダッシュゲームUI化（見た目と体感を上げる）

目的：マリオ/チャリ走っぽく「走ってる世界」を下段に固定し、上段は計算に集中。

A1. レイアウト分離（上：計算 / 下：ラン画面）

上段：問題＋入力（静）

下段：コース＋キャラ＋背景（動）

A2. 背景スクロール（速度＝背景速度）

キャラが動くより “背景が流れる” ほうがゲーム感が出て実装も安い

A3. キャラ差し替え（棒人間→チャリ走シルエット）

まずはCSSシルエット（黒）でOK

後でPNG/SVG差し替え

Phase B：正解/ミスの“演出”で脳に報酬を作る（あなたの要望）

目的：「正解＝加速が気持ちいい」を目で分かるようにする。

B1. 正解時：ブースト演出（必須）

キャラが一瞬前傾＋ブラー

速度メーターが一瞬光る

トラック上に「スピードライン」出す（CSSだけで可能）

B2. ミス時：減速演出（軽め）

キャラが小さく沈む（ガクッ）

0.2秒だけ背景スクロール弱め（または赤フラッシュ薄く）

Phase C：距離競争の完成（ランキングと日別の距離見える化）

すでに 当日TOP3・日別ベスト距離が入っているので、最後の仕上げは軽いです。

C1. “TOP3入り”演出（当日ランキングに入った瞬間だけ）

C2. 距離も7日テーブルで強調（すでに v3.4 で完了に近い／完了済み）

2. CodeXで「できること / できないこと」
CodeXでできること（強い領域）

HTML/CSS/JSの実装（画面分割・アニメ・DOM操作・状態管理）

最小差分パッチでの反復改善（あなたの開発スタイルに完全一致）

ゲームロジックの整備（速度・距離・減速・摩擦・ランキング等）

UIの作り替え（レイアウト、HUD、ランナーゾーン）

CodeXだけだと弱い / できないこと

✅ “良いシルエット素材”の制作

CodeXはコードは書けるが、良いキャラ画像そのものは作れない

✅ 作品としてのビジュアル統一（アートディレクション）

色・形・世界観の作り込みは、人間or画像生成のほうが速い

→ ここはあなたの言う通り、画像生成でキャラ（透過PNG/SVG）を作って差し替えるのが最短です。

3. 「正解のたびにスピードアップ演出」実装方針（具体）

今の実装は “数値として速度が上がる” はできています。次は **“視覚として加速”**です。

3.1 最小の演出セット（まずこれだけでOK）

正解時（0.25秒）

ランナーに boost クラス付与

トラックに speed-lines を表示

HUDの速度表示を glow させる

ミス時（0.2秒）

ランナーに hit（沈む）

HUDを薄赤フラッシュ

3.2 CodeXに投げるプロンプト（そのまま使える）
目的：正解時に「加速した！」が視覚で分かる演出を追加する（数値のspeedUpとは別）。

要件
- 正解時（isReviewMode=false のときのみ）
  - runner に .boost クラスを付けて 250ms で外す
  - runner-track に .speed-lines を一瞬表示（疑似要素でOK）
  - 速度表示（#game-speed）に .glow クラスを付けて 250ms で外す
- 不正解時（isReviewMode=false のときのみ）
  - runner に .hit クラス（沈む）を 200ms 付けて外す
  - status-bar を薄く赤フラッシュ（.shake は不要、軽く）
- 既存の enter/exit のイベント設計を壊さない
- setTimeoutはID保持し、exitで解除（残留防止）

実装場所の目安
- src/screens/gameScreen.js：submitAnswer内の正誤判定後
- index.html：runner-track内に speed-lines 用の要素（またはCSS疑似要素）
- styles/style.css：.boost .hit .glow .speed-lines の定義
- src/ui/domRefs.js：必要なら参照追加

成果物
- 差分パッチ
- 変更ファイル一覧
- 手動検証メモ（正解連続で加速演出が出る / 復習では出ない）

4. キャラクター（チャリ走シルエット）導入の最短ルート

「難しければ画像生成して、そのキャラクターを走らせる」が最短です。
実装の順番は：

まずCSSシルエットで走らせる（当日中に完成）

画像生成で「透過PNGのシルエット」を作る

div.runner の背景を PNG に差し替える

画像生成プロンプト（例：透過PNG）

（あなたが画像生成を使うときの土台）

ランナー（透過）

「チャリ走風、黒一色、横向き、影のみ、透過背景、2Dゲーム素材」

地面（ループ）

「横スクロール用、継ぎ目なし、シンプルな地面、低コスト」

必要なら、こちらでプロンプトを “あなたのUIの色味” に合わせて最適化します。

5. 次の実装計画（提案：2スプリント）
Sprint 1（ゲーム感の核）

UIを「上：計算」「下：走る」に分離（A1）

背景スクロール（A2）

正解/ミス演出（B1/B2）←あなたの要望必須

Sprint 2（キャラ差し替え）

画像生成（ランナー透過PNG）＋差し替え

速度に応じた背景スピード調整のチューニング

ここで確認したい一点だけ（すぐ決めたい）

「正解でスピードアップ」の演出は、**“数値の上昇に追随”**でいいですか？
それとも **“一瞬だけターボ（+αの視覚演出のみ）”**を入れたいですか？

迷うなら、まずは 追随（今のspeedUpに合わせて演出）でOKです。
ターボは調整が難しく、学習バランスが崩れやすいので後回しが安全。