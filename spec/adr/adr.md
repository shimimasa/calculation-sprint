Decision checklist（論点一覧：Yes/No / A/B）
#1 ステージの定義
A/B: A=学習カリキュラム（達成判定あり） / B=おすすめ課題セレクタ（達成判定なし）
- Answer: [B]
- Notes:

Yes/No: 次ステージ解放は「成績」で行う？（Yes）/「プレイ実施」で行う？（No）
- Answer: [No] 
Yes/No: UI上の「クリア」を学習達成として保証する？（Yes/No）
- Answer: [No] 
Yes/No: ステージは将来増える前提でデータ駆動（JSON等）に寄せる？（Yes/No）
- Answer: [Yes] 

#2 共用端末（複数児童）運用
A/B: A=個人端末前提（プロファイルなし） / B=共用端末前提（プロファイル必須）
- Answer: [B] 
- Notes:
Yes/No: 起動時に「利用者選択」を必須にする？（Yes/No）
- Answer: [Yes] 
A/B: A=匿名プロファイル（アイコン+番号） / B=名前入力あり
- Answer: [A] 
Yes/No: 記録（統計/ランキング/進捗）はプロファイル単位で完全分離する？（Yes/No）
- Answer: [Yes] 

#3 入力モデル（Enter依存）
Yes/No: 「回答確定」はEnter以外（タップボタン/支援スイッチ等）でも必須対応にする？（Yes/No）
- Answer: [Yes] 

A/B: A=入力抽象I/F（決定・戻る等を統一） / B=画面ごとに個別対応
- Answer: [A] 

Yes/No: 学習現場向けにオンスクリーンテンキーを“標準装備”にする？（Yes/No）
- Answer: [Yes] 

#4 統合・配布（サブパス/埋め込み）

A/B: A=単体サイト配布前提 / B=ポータル統合前提（サブパス・埋め込み）
- Answer: [B] 
Yes/No: アセット参照は“相対パス/ベースパス可変”を原則にする？（Yes/No）
- Answer: [Yes] 
Yes/No: CSSはアプリルート配下にスコープし、グローバルリセットを禁止する？（Yes/
No）
- Answer: [Yes] 
Yes/No: localStorageキーはポータル共通の名前空間ルールに従う？（Yes/No）
- Answer: [Yes] 

#5 仕様書の正本（SSoT）

Yes/No: 仕様の正本を1つに固定し、旧版は“アーカイブ”扱いにする？（Yes/No）
- Answer: [Yes] 

A/B: A=プロダクト仕様（目的/UX/運用）と技術仕様（I/F/保存/遷移）を分離 / B=1枚に混在
- Answer: [A] 

Yes/No: 以後の判断はADRで積む運用にする？（Yes/No）
- Answer: [Yes] 


推奨案（デフォルト）と理由（各3点）
#1 ステージ定義：推奨=B（おすすめ課題セレクタ）＋解放は“プレイ実施”
理由1: 教育現場では「クリア＝できた」を安易に保証すると誤指導・誤学習になるため、まずは“課題提示”に徹するのが安全
理由2: 達成判定（正答率/速度/ミス内訳）は校種・個人差で閾値が変わり、早期固定は後戻りコストが高い
理由3: ポータル統合時に、他教材と同じ「課題選択→実施→振り返り」型へ揃えやすい


#2 共用端末：推奨=B（共用端末前提）＋“匿名プロファイル選択”必須＋記録完全分離
理由1: 放課後デイ/支援教室の実態に合う（共用端末・短時間入替・名前入力できない場面が多い）
理由2: 記録混入は対人トラブルに直結し、後から直すとデータ移行が重いので先に塞ぐべき
理由3: ポータル側の「利用者コンテキスト」と接続しやすい（将来はSSO/児童ID連携にも拡張可能）

#3 入力モデル：推奨=Yes（Enter以外も必須）＋A（入力抽象I/F）
理由1: タブレット/スマホ/支援スイッチで“操作できない離脱”を防ぐのが最優先
理由2: 画面ごと個別対応は増築で破綻しやすく、統合時の共通基盤にもならない
理由3: 発達特性配慮として「どこを押せば進むか」を常に明示できる（見通し・安心）

#4 配布/統合：推奨=B（ポータル統合前提）＋サブパス配信を正、埋め込みはオプション
理由1: 統合直前に壊れる典型（絶対パス/CSS衝突）を、設計判断だけで先に潰せる
理由2: サブパス前提にしておけば、単体配布も“たいてい成立”するが逆は成立しにくい
理由3: ポータル側の共通CSS/レイアウトと干渉しないことが長期運用の必須条件

#5 仕様の正本：推奨=Yes（正本1つ）＋A（プロダクト仕様と技術仕様を分離）＋ADR運用
理由1: 仕様の多版併存は、改善速度と監査耐性（説明責任）を確実に落とす
理由2: プロダクト目的（教育的意図）と技術I/Fは更新頻度が違うため分離が合理的
理由3: 統合時は“何が正か”が最重要。ADRで判断履歴を残すのが最小コストで効く


ADR（番号付き、各10〜15行）

ADR-001：ステージは「課題セレクタ」とし、学習達成を保証する“クリア判定”は持たない
Context: 現状のステージ進行は「クリア/開放」の語彙と、学習達成の保証が結びついて誤解を生む恐れがある。後から判定基準を入れると進捗整合と説明が崩れやすい。
Decision: ステージは「おすすめ課題（プリセット＋説明）」のセレクタと定義する。次ステージ解放は成績ではなく「前ステージを1回実施」で行い、UI文言も“到達/挑戦”寄りに揃える。
Consequences: 得る=誤学習リスク低下、閾値議論の先送り、統合時の整合性。失う=ゲーム的な達成（真のクリア感）は弱くなるため、将来は別軸（バッジ/称号）で補う必要がある。

ADR-002：共用端末を前提に「匿名プロファイル選択」を必須化し、記録を完全分離する
Context: 学校/支援現場は共用端末が基本で、localStorageに記録を積む現設計は混入・比較・恥のリスクがある。後付けで分離すると移行が重い。
Decision: 起動時に「利用者（匿名）選択」を必須にする。統計/ランキング/進捗はプロファイル単位で分離し、リセットもプロファイル単位を原則とする。
Consequences: 得る=実運用適合、トラブル予防、ポータルの利用者コンテキストと接続可能。失う=起動が1ステップ増えるため、教師の“即開始”導線はショートカット（最後の利用者をデフォルト選択等）で補う前提。

ADR-003：「回答確定」を入力抽象I/Fに統一し、Enter依存を撤廃する
Context: Enterキー中心はモバイル/支援機器で詰まりやすく、「解けない」ではなく「操作できない」離脱を生む。統合後は共通入力基盤が必要になる。
Decision: “決定（submit）”をキーボード・タップボタン・支援スイッチ等で同等に扱う入力I/Fを採用する。UIとして常に押せる「確定」操作を提供し、Enterはショートカット扱いに降格する。
Consequences: 得る=デバイス互換性、見通しの良いUX、他プロダクトとの入力統一。失う=入力実装の設計範囲が広がるため、先にI/Fを固定しないと拡張が難しくなる。

ADR-004：ポータル統合（サブパス）を正として、CSSスコープとアセット解決を統一ルール化する
Context: 統合時の事故は「絶対パスで404」「CSS衝突で崩壊」が最頻。直前対応は後戻りコストが最大化しやすい。
Decision: 配布の正はサブパス配信とし、アセット参照はベースパス可変（相対参照）を原則にする。CSSはアプリルート配下へスコープし、グローバルリセットの増築を禁止する。localStorageキーもポータル共通の名前空間方針に従う。
Consequences: 得る=統合耐性、他画面への副作用抑制、長期運用の安全。失う=単体直置き前提の“楽な書き方”はできなくなるため、以後の実装はルール順守が必須。

ADR-005：仕様の正本を1つに固定し、以後の判断はADRで積む
Context: 仕様書が多版併存すると「何が正か」の説明責任が崩れ、教育導入・監査・統合で致命傷になる。
Decision: 正本（SSoT）を1つに定め、プロダクト仕様（目的/UX/運用）と技術仕様（I/F/保存/遷移）を分離する。以後、重要判断はADRとして記録し、仕様はADRに従って更新する。
Consequences: 得る=説明可能性、引継ぎ容易性、統合時の判断速度。失う=短期的にはドキュメント整備のコストが発生するが、後戻りより安い。

Implementation roadmap（Phase0/1/2：影響範囲・難易度つき）
Phase0：破壊を防ぐ土台（最短）

配布/統合ルール確定（ADR-004の具体化）
影響範囲: 全画面（CSS/アセット/保存キー方針）
難易度: 中（判断は即、既存との整合確認が必要）

保存データの名前空間方針（プロファイル前提のキー設計）
影響範囲: dailyStatsStore/todayRankStore/stageProgressStore相当の永続化全体
難易度: 中

SSoT＋ADR運用開始（ADR-005）
影響範囲: 開発運用（仕様の読み方が変わる）
難易度: 低〜中

Phase1：UX/運用の致命傷を塞ぐ
匿名プロファイル選択（必須化）（ADR-002）
影響範囲: 起動導線、記録/進捗/ランキングの分離、リセット導線
難易度: 高（ただし“匿名”にすることで現場導入は容易）

入力I/F統一＋確定ボタン標準化（ADR-003）
影響範囲: game画面中心だが、共通入力としては全screenに波及
難易度: 中〜高

ステージ意味づけの修正（ADR-001）
影響範囲: ステージ選択/結果表示/文言（「クリア」の扱い）
難易度: 中（判定ロジックを入れない方針なので抑えられる）

Phase2：学習指標と演出の整合
“学習達成”の別軸化（バッジ/称号/先生向け所見）
影響範囲: 結果画面、記録スキーマ、統合ダッシュボード連携
難易度: 中

ランキング/距離ボーナスの位置づけ最適化（学習を裏切らない設計）
影響範囲: スコア設計、表示優先順位、設定（競争ON/OFF等）
難易度: 中

復習モードの“安心設計”（時間圧の調整、支援現場向け運用プリセット）
影響範囲: 復習導線、タイマー/終了条件、先生の運用フロー
難易度: 中
（上記は spec/0204Cursor.md の「致命度：高」指摘を、実装前の“決定事項（ADR）”に落としたものです。必要なら、このADRをそのまま spec/adr/ 配下へ配置する前提の体裁にも整えますが、今回は判断の確定のみで止めています。）