# ADR-005: 仕様の正本を固定し、運用ルールを明文化する（SSoT運用）

Status: Accepted
Date: 2026-02-06

## Context

- 仕様書が多版併存すると「何が正か」を説明できず、監査/導入/統合で致命傷になる。
- プロダクト目的と技術I/Fは更新頻度が異なり、混在すると破綻しやすい。
- 重要判断の履歴がないと、後で議論が蒸し返される。

## Decision

- SSoT（正本）を `spec/product-spec.md` と `spec/tech-spec.md` の2本に固定する。
- 重要判断はADRとして追加記録し、過去ADRは更新せず履歴を残す。
- 旧仕様はアーカイブ扱いとし、参照時は「SSoT → ADR → archive」の順で判断する。

## 運用ルール（追加）

1. **正本の優先順位**: SSoT（product/tech）を第一、ADRを第二、アーカイブは参考のみ。
2. **アーカイブの扱い**: `spec/archive/` は参照専用。更新禁止、改定が必要な場合はSSoTまたはADRで行う。
3. **更新手順**:
   - 仕様変更はまずSSoTに反映し、必要に応じてADRを新規追加する。
   - 変更理由・影響範囲・関連ADRを必ず記録する。
4. **証跡の扱い**:
   - 受け入れ試験の正本は `spec/test-results/adr-acceptance-latest.md`。
   - 生成ツールは `tools/adr-e2e` または `tools/adr_manual_runner.mjs` を使用する。

## Non-goals

- 既存の全仕様書を即時に統廃合しない（段階的に移行する）。
- 仕様の完全性（網羅100%）を初回から求めない（重要項目優先）。
- 実装詳細（関数単位の挙動）をSSoTに書きすぎない。

## Consequences

- 得るもの: 説明可能性、引継ぎ容易性、統合時の判断速度。
- 失うもの: ドキュメント整備コスト（ただし後戻りより安い）。

## References

- spec/product-spec.md
- spec/tech-spec.md
- spec/test-results/adr-acceptance-latest.md
